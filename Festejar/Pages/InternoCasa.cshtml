@page
@model Festejar.Pages.InternoCasaModel
@{
}
﻿
﻿
<!DOCTYPE html>
<html lang="en">
<body>
   
    <div class="breadcrumb-area breadcrumb-padding">
        <div class="container custom-container-one">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb-contents">
                        <h4 class="breadcrumb-contents-title"> Detalhes da casa </h4>
                        <ul class="breadcrumb-contents-list list-style-none">
                            <li class="breadcrumb-contents-list-item"> <a href="index.html" class="breadcrumb-contents-list-item-link"> Home </a> </li>
                            <li class="breadcrumb-contents-list-item"> <a href="listing.html" class="breadcrumb-contents-list-item-link"> Hotels </a> </li>
                            <li class="breadcrumb-contents-list-item"> Detalhes do espaço </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <section class="hotel-details-area section-bg-2 pat-100 pab-100">
        <form id="dataForm" method="post">
        <div class="container">
            <div class="row g-4">               
                <div class="col-xl-8 col-lg-7">
                    <div class="details-left-wrapper">
                        <div class="details-contents bg-white radius-10">
                            <div class="details-contents-header">
                                <div class="details-contents-thumb details-contents-main-thumb bg-image" style="background-image: url(/img/shots/img3.jpeg);">
                                </div>
                                <div class="mt-4 row">
                                    <div class="details-contents-header-thumb col-lg-6 col-md-12">
                                        <img src="/img/shots/img1.png" alt="img">
                                    </div>
                                    <div class="details-contents-header-thumb col-lg-6 col-md-12">
                                        <img src="/img/shots/img2.png" alt="img">
                                        <a href="javascript:void(0)" class="more-photos"> <i class="las la-plus"></i> Mais Fotos </a>
                                    </div>
                                </div>
                            </div>
                            <div class="hotel-view-contents">
                                <div class="hotel-view-contents-header">
                                    <span class="hotel-view-contents-review"> <i class="las la-star"></i> 4.5 <span class="hotel-view-contents-review-count"> (380) </span> </span>
                                    <h3 class="hotel-view-contents-title"> @Model.InternoCasa.Titulo </h3>
                                    <div class="hotel-view-contents-location mt-2">
                                        <span class="hotel-view-contents-location-icon"> <i class="las la-map-marker-alt"></i> </span>
                                        <span class="hotel-view-contents-location-para"> @Model.InternoCasa.Endereco </span>
                                    </div>
                                </div>
                                <div class="hotel-view-contents-middle">
                                    <div class="hotel-view-contents-flex">
                                        @*percorre a variavel Comodidades da viewdata que possui o join no backend*@
                                        @foreach (var comodidade in (IEnumerable<dynamic>)ViewData["Comodidades"])
                                        {                                         
                                                foreach (var item in comodidade)
                                                {
                                                    <div class="hotel-view-contents-icon d-flex gap-1">
                                                        <span> <i class="las la-Piscina de Bolinha"></i> </span>
                                                        <p class="hotel-view-contents-icon-title flex-fill">@item.Titulo</p>
                                                    </div>
                                                }                                          
                                        }
                                    </div>
                                </div>
                                <div class="hotel-view-contents-bottom">
                                    <div class="hotel-view-contents-bottom-flex">
                                        <div class="hotel-view-contents-bottom-contents">
                                            <h4 class="hotel-view-contents-bottom-title"> @ViewData["ValorDiaria"] <sub>/Diaria</sub> </h4>
                                            <p class="hotel-view-contents-bottom-para"> (4 Nights, 2 Rooms, 4 Persons) </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="details-contents-tab">
                                <ul class="tabs details-tab details-tab-border">
                                    <li class="active" data-tab="about"> Sobre </li>
                                    <li data-tab="reviews"> Avaliações </li>
                                </ul>
                                <div id="about" class="tab-content-item active">
                                    <div class="about-tab-contents">
                                        <p class="about-tab-contents-para"> @Model.InternoCasa.Descricao </p>
                                    </div>
                                </div>
                                <div id="reviews" class="tab-content-item">
                                    <div class="review-tab-contents">
                                        <div class="review-tab-contents-single">
                                            <div class="rating-wrap">
                                                <div class="ratings">
                                                    <span class="hide-rating"></span>
                                                    <span class="show-rating"></span>
                                                </div>
                                                <p> <span class="total-ratings">(167)</span></p>
                                            </div>
                                            <p class="about-review-para mt-3"> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed a egestas leo. Aliquam ut ante lobortis tellus cursus pellentesque. Praesent feugiat tellus quis aliquet </p>
                                            <div class="review-tab-contents-author mt-4">
                                                <h4 class="review-tab-contents-author-name"> Sandra M. Hurt </h4>
                                                <p class="review-tab-contents-author-para mt-2"> TrustPilot </p>
                                            </div>
                                        </div>
                                        <div class="review-tab-contents-single">
                                            <div class="rating-wrap">
                                                <div class="ratings">
                                                    <span class="hide-rating"></span>
                                                    <span class="show-rating"></span>
                                                </div>
                                                <p> <span class="total-ratings">(236)</span></p>
                                            </div>
                                            <p class="about-review-para mt-3"> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed a egestas leo. Aliquam ut ante lobortis tellus cursus pellentesque. Praesent feugiat tellus quis aliquet </p>
                                            <div class="review-tab-contents-author mt-4">
                                                <h4 class="review-tab-contents-author-name"> Robert Fox </h4>
                                                <p class="review-tab-contents-author-para mt-2"> Designer </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="hotel-view bg-white radius-20 mt-4">
                            <div class="hotel">

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">Item Decoração</th>
                                            <th scope="col">Preço</th>
                                            <th scope="col">Quantidade Disponivel</th>
                                            <th scope="col">Quantidade Desejada</th>
                                            <th scope="col">Valor total do item</th>
                                        </tr>
                                    </thead>
                                        <tbody>
                                            @foreach (var casaRecurso in (IEnumerable<dynamic>)ViewData["CasasRecursos"])
                                            {
                                                <tr>
                                                    <td>@casaRecurso.Titulo</td>
                                                    <td>@casaRecurso.Valor</td>
                                                    <td>@casaRecurso.Quantidade</td>

                                                    <td>
                                                        <button type="button" class="btn btn-danger decrement">-</button>
                                                        <input style="width: 30px;" type="text" class="quantity" value="0" data-max="@casaRecurso.Quantidade" data-valor="@casaRecurso.Valor">
                                                        <button data-id="@casaRecurso.Id" type="button" class="btn btn-danger increment">+</button>

                                                        <!-- recebe os valores dos recursoId incrementado -->
                                                        <input type="hidden" name="recursoId[]" value="@casaRecurso.Id">
                                                        <input type="hidden" id="quantidade" name="quantidade[]" value="">

                                                    </td>
                                                    <td class="total-value">Valor Total: R$ 0.00</td>
                                                </tr>
                                            }
                                        </tbody>


                                </table>

                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-xl-4 col-lg-5">
                    <div class="sticky-top">
                        <div class="hotel-details-widget hotel-details-widget-padding widget bg-white radius-10">
                            <div class="details-sidebar">                               
                                <div class="details-sidebar-dropdown custom-form">                                   
                                        <div class="single-input">
                                            <label class="details-sidebar-dropdown-title"> Selecione uma data: </label>
                                            <input id="dataInput" value="@((ViewData["DataSelecionada"] != null) ? ((DateTime)ViewData["DataSelecionada"]).ToString("yyyy/MM/dd") : "")" class="form--control date-picker" type="text" name="
" placeholder="@((ViewData["DataSelecionada"] != null) ? ((DateTime)ViewData["DataSelecionada"]).ToString("dd/MM/yyy") : "Data desejada:")" />
                                        </div>                                   
                                </div>                               
                                    <div class="details-sidebar-quantity pt-4">
                                        <div class="details-sidebar-quantity-flex">
                                            <div class="details-sidebar-quantity-item">
                                                <h6 class="details-sidebar-quantity-title"> Convidados </h6>
                                                <div class="details-sidebar-quantity-field">
                                                    <span class="minus"><i class="las la-minus"></i></span><input class="quantity-input" type="number" name="convidados" value="0"><span class="plus"><i class="las la-plus"></i></span>
                                                </div>
                                            </div>
                                            <div class="details-sidebar-quantity-item">
                                                <h6 class="details-sidebar-quantity-title"> Crianças </h6>
                                                <div class="details-sidebar-quantity-field">
                                                    <span class="minus"><i class="las la-minus"></i></span><input class="quantity-input" type="number" name="criancas" value="0"><span class="plus"><i class="las la-plus"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="btn-wrapper mt-4">
                                        <input type="hidden" name="valorDiaria" value="@ViewData["ValorDiaria"]" />
                                        <input type="hidden" name="dataReserva" value="@ViewData["DataSelecionada"]" />
                                        <input type="hidden" name="casaId" value="@Model.InternoCasa.Id" />
                                        <button type="submit" class="cmn-btn btn-bg-1 btn-small" asp-page-handler="Checkout"> Agendar reserva </button>
                                    </div>                               
                            </div>
                        </div>

                        <div class="hotel-details-widget widget bg-white radius-10">
                            <div class="hotel-view">
                                <div class="hotel-view-thumb hotel-view-grid-thumb bg-image" style="background-image: url(/img/shots/img8.jpeg);">
                                </div>
                                <div class="hotel-view-contents">
                                    <div class="hotel-view-contents-header">
                                        <span class="hotel-view-contents-review"> <i class="las la-star"></i> 4.5 <span class="hotel-view-contents-review-count"> (380) </span> </span>
                                        <h3 class="hotel-view-contents-title"> @Model.InternoCasa.Titulo </h3>
                                        <div class="hotel-view-contents-location mt-2">
                                            <span class="hotel-view-contents-location-icon"> <i class="las la-map-marker-alt"></i> </span>
                                            <span class="hotel-view-contents-location-para"> @Model.InternoCasa.Endereco </span>
                                        </div>
                                    </div>
                                    <div class="hotel-view-contents-middle">
                                        <div class="hotel-view-contents-flex">
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Car Parking">
                                                <i class="las la-parking"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Free Wifi">
                                                <i class="las la-wifi"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Free Breakfast">
                                                <i class="las la-coffee"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Home Service">
                                                <i class="las la-quidditch"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Swimming Pool">
                                                <i class="las la-swimming-pool"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Reception">
                                                <i class="las la-receipt"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon myTooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="Gym">
                                                <i class="las la-dumbbell"></i>
                                            </div>
                                            <div class="hotel-view-contents-icon">
                                                <a class="hotel-view-contents-icon-more" href="javascript:void(0)"> +8 More </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="hotel-view-contents-bottom">
                                        <div class="hotel-view-contents-bottom-flex">
                                            <div class="hotel-view-contents-bottom-contents">
                                                <h4 class="hotel-view-contents-bottom-title"> @ViewData["ValorDiaria"] <sub>/Diaria</sub> </h4>
                                                <p class="hotel-view-contents-bottom-para"> (4 Nights, 2 Rooms, 4 Persons) </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="hotel-details-widget hotel-details-widget-padding widget bg-white radius-10">
                            <div class="details-sidebar">
                                <div class="details-sidebar-offer center-text radius-10">
                                    <div class="details-sidebar-offer-shapes">
                                        <img src="/img/shots/img7.jpeg" alt="shapes">
                                    </div>
                                    <div class="details-sidebar-offer-thumb">
                                        <img src="/img/shots/img6.jpeg" alt="shapes">
                                    </div>
                                    <div class="btn-wrapper mt-5">
                                        <a href="javascript:void(0)" class="cmn-btn btn-bg-white"> Agende Agora </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </form>
    </section>

    <div class="back-to-top">
        <span class="back-top"> <i class="las la-angle-up"></i> </span>
    </div>


    <div class="mouse-move mouse-outer"></div>
    <div class="mouse-move mouse-inner"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var incrementButtons = document.querySelectorAll(".increment");
            var decrementButtons = document.querySelectorAll(".decrement");
            var quantityInputs = document.querySelectorAll(".quantity");
            var hiddenQuantityInputs = document.querySelectorAll("#quantidade");

            // Adicionar manipuladores de eventos aos botões "increment"
            incrementButtons.forEach(function (button) {
                button.addEventListener("click", function () {
                    var index = Array.from(incrementButtons).indexOf(button);
                    var newValue = parseInt(quantityInputs[index].value) + 1;
                    quantityInputs[index].value = newValue;
                    updateHiddenQuantity(index);
                });
            });

            // Adicionar manipuladores de eventos aos botões "decrement"
            decrementButtons.forEach(function (button) {
                button.addEventListener("click", function () {
                    var index = Array.from(decrementButtons).indexOf(button);
                    var newValue = parseInt(quantityInputs[index].value) - 1;
                    if (newValue < 0) newValue = 0;
                    quantityInputs[index].value = newValue;
                    updateHiddenQuantity(index);
                });
            });

            function updateHiddenQuantity(index) {
                hiddenQuantityInputs[index].value = quantityInputs[index].value;
                console.log(hiddenQuantityInputs[index].value);
            }
        });




        // Função para exibir o valor total na página
        function displayTotalValue() {
            const totalElement = document.getElementById('total'); // Supondo que você tenha um elemento com id 'total'
            totalElement.textContent = 'Valor Total: ' + totalValue.toFixed(2);
        }

        // Seleciona o campo de entrada de data
        var dataInput = document.getElementById("dataInput");

        // Adiciona um evento para detectar quando o valor do campo é alterado
        dataInput.addEventListener("change", function () {
            // Atualiza o valor do campo oculto 'dataReserva'
            document.getElementsByName('dataReserva')[0].value = this.value;
            // Envia automaticamente o formulário quando o valor do campo é alterado
            document.getElementById("dataForm").submit();
        });
    </script>
</body>
</html>
